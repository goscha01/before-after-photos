<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#667eea" />
    <meta name="description" content="Mobile-first cleaning photo documentation app" />

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

    <!-- Prevent zoom on input fields -->
    <meta name="format-detection" content="telephone=no" />

    <!-- Status bar styling for iOS -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Cleaning App" />
    
    <!-- Additional iOS compatibility -->
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-orientations" content="portrait" />

    <title>Cleaning Photo App</title>

    <style>
      /* Prevent flash of unstyled content */
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background-color: #f8fafc;
        color: #1e293b;
        overscroll-behavior: none;
      }

      /* Loading spinner */
      .loading-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8fafc;
        z-index: 9999;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid #e2e8f0;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Hide loading once React loads */
      #root:not(:empty) + .loading-container {
        display: none;
      }

      /* Debug info */
      .debug-info {
        position: fixed;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 10px;
        border-radius: 5px;
        font-size: 12px;
        z-index: 10000;
        max-width: 300px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <div class="loading-container">
      <div class="loading-spinner"></div>
    </div>
    
    <!-- Debug info -->
    <div class="debug-info" id="debug-info">
      <div>üöÄ HTML Loaded</div>
      <div>üì± User Agent: <span id="user-agent">Loading...</span></div>
      <div>üåê Location: <span id="location">Loading...</span></div>
      <div>‚è∞ Time: <span id="time">Loading...</span></div>
    </div>
    
    <script>
      // Basic debug info
      console.log('üöÄ Debug: HTML loaded');
      console.log('üöÄ Debug: User Agent:', navigator.userAgent);
      console.log('üöÄ Debug: Location:', window.location.href);
      
      // Update debug info
      document.getElementById('user-agent').textContent = navigator.userAgent.substring(0, 50) + '...';
      document.getElementById('location').textContent = window.location.href;
      document.getElementById('time').textContent = new Date().toLocaleTimeString();
      
      // Check if we're on iOS
      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
      console.log('üöÄ Debug: Is iOS:', isIOS);
      
      if (isIOS) {
        document.getElementById('debug-info').innerHTML += '<div style="color: #ff6b6b;">üçé iOS Detected</div>';
      }
      
      // Check if React loads
      let reactLoadTimer = setTimeout(() => {
        console.log('‚ùå Debug: React failed to load within 10 seconds');
        document.getElementById('debug-info').innerHTML += '<div style="color: #ff6b6b;">‚ùå React Failed to Load</div>';
      }, 10000);
      
      // Clear timer when React loads
      window.addEventListener('load', () => {
        clearTimeout(reactLoadTimer);
        console.log('‚úÖ Debug: Page fully loaded');
      });
      
      // Check for React errors
      window.addEventListener('error', (e) => {
        console.log('‚ùå Debug: JavaScript error:', e.error);
        document.getElementById('debug-info').innerHTML += '<div style="color: #ff6b6b;">‚ùå JS Error: ' + e.error.message + '</div>';
      });
      
      // Check for unhandled promise rejections
      window.addEventListener('unhandledrejection', (e) => {
        console.log('‚ùå Debug: Unhandled promise rejection:', e.reason);
        document.getElementById('debug-info').innerHTML += '<div style="color: #ff6b6b;">‚ùå Promise Error: ' + e.reason + '</div>';
      });
      
      // Monitor script loading
      const scripts = document.querySelectorAll('script[type="module"]');
      scripts.forEach((script, index) => {
        script.addEventListener('load', () => {
          console.log('‚úÖ Debug: Script ' + index + ' loaded successfully');
          document.getElementById('debug-info').innerHTML += '<div style="color: green;">‚úÖ Script ' + index + ' loaded</div>';
        });
        script.addEventListener('error', (e) => {
          console.log('‚ùå Debug: Script ' + index + ' failed to load:', e);
          document.getElementById('debug-info').innerHTML += '<div style="color: red;">‚ùå Script ' + index + ' failed: ' + e.message + '</div>';
        });
      });
      
      // Check if main.jsx loads
      console.log('üöÄ Debug: About to load main.jsx');
    </script>
    
    <!-- Simple JavaScript test -->
    <script>
      console.log('üß™ Debug: Testing basic JavaScript...');
      
      // Test if we can create DOM elements
      try {
        const testDiv = document.createElement('div');
        testDiv.innerHTML = '<div style="color: green;">‚úÖ Basic JavaScript Works!</div>';
        document.getElementById('debug-info').appendChild(testDiv);
        console.log('‚úÖ Debug: Basic JavaScript works');
      } catch (e) {
        console.log('‚ùå Debug: Basic JavaScript failed:', e);
      }
      
      // Test if we can fetch (for checking if the app files exist)
      fetch('/src/main.jsx')
        .then(response => {
          console.log('‚úÖ Debug: main.jsx file exists, status:', response.status);
          if (response.status === 200) {
            document.getElementById('debug-info').innerHTML += '<div style="color: green;">‚úÖ main.jsx file exists</div>';
          } else {
            document.getElementById('debug-info').innerHTML += '<div style="color: red;">‚ùå main.jsx file not found (status: ' + response.status + ')</div>';
          }
        })
        .catch(error => {
          console.log('‚ùå Debug: Cannot fetch main.jsx:', error);
          document.getElementById('debug-info').innerHTML += '<div style="color: red;">‚ùå Cannot fetch main.jsx: ' + error.message + '</div>';
        });
    </script>
    
    <!-- Try minimal test first -->
    <script type="module" src="/src/test-minimal.jsx"></script>
    
    <!-- Try ES6 module first -->
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Fallback for browsers that don't support ES6 modules -->
    <script nomodule>
      console.log('‚ùå Debug: ES6 modules not supported, using fallback');
      document.getElementById('debug-info').innerHTML += '<div style="color: orange;">‚ö†Ô∏è ES6 modules not supported</div>';
      
      // Show a simple message instead of React app
      setTimeout(() => {
        document.getElementById('root').innerHTML = `
          <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
            <h1>üö´ Browser Compatibility Issue</h1>
            <p>Your browser doesn't support ES6 modules, which are required for this app.</p>
            <p>Please update your browser or try a different browser.</p>
            <p style="color: #666; font-size: 14px;">iOS Safari 10.3+ is required for ES6 module support.</p>
          </div>
        `;
      }, 2000);
    </script>
    
    <script>
      // This will run after main.jsx loads (if it loads)
      console.log('‚úÖ Debug: main.jsx script tag processed');
    </script>
  </body>
</html>